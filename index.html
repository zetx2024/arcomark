<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Details with Rank Sharing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 10px;
            text-align: center;
            cursor: pointer;
        }

        th {
            background-color: #f4f4f4;
        }

        .share-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }

        .share-button:hover {
            background-color: #45a049;
        }

        .share-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h2>Student Details Table</h2>

<table id="studentTable">
    <thead>
        <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Roll Number</th>
            <th>Score</th>
        </tr>
    </thead>
    <tbody>
        <!-- Rows will be populated via JavaScript -->
    </tbody>
</table>

<div class="share-container">
    <button class="share-button" id="shareButton">Share Rank</button>
</div>

<script>
// Sample JSON data
const studentsData = [
    { "rank": 1, "name": "John Doe", "rollNumber": "S101", "score": 98 },
    { "rank": 2, "name": "Jane Smith", "rollNumber": "S102", "score": 96 },
    { "rank": 3, "name": "Alice Brown", "rollNumber": "S103", "score": 94 },
    { "rank": 4, "name": "Bob White", "rollNumber": "S104", "score": 92 }
];

// Function to generate table rows from JSON data
function generateTable() {
    const tableBody = document.querySelector('#studentTable tbody');
    studentsData.forEach(student => {
        const row = document.createElement('tr');
        row.dataset.rank = student.rank;
        
        row.innerHTML = `
            <td>${student.rank}</td>
            <td>${student.name}</td>
            <td>${student.rollNumber}</td>
            <td>${student.score}</td>
        `;
        
        // Add event listener for double-clicking any table element to copy rank link
        row.querySelectorAll('td').forEach(cell => {
            cell.addEventListener('dblclick', () => copyRankLink(student.rank));
        });

        tableBody.appendChild(row);
    });

    // Check if the URL contains a rank query parameter after the table is generated
    const urlParams = new URLSearchParams(window.location.search);
    const rankFromUrl = urlParams.get('rank');
    if (rankFromUrl) {
        highlightRank(rankFromUrl);
    }
}

// Function to highlight the rank when a link is clicked
function highlightRank(rank) {
    const allRows = document.querySelectorAll('#studentTable tbody tr');
    allRows.forEach(row => {
        // Remove any previous highlighting by resetting the background color
        row.style.backgroundColor = '';
    });

    // Find the row with the matching rank and highlight it
    const rowToHighlight = document.querySelector(`#studentTable tbody tr[data-rank="${rank}"]`);
    if (rowToHighlight) {
        rowToHighlight.style.backgroundColor = 'red';
        rowToHighlight.style.color = 'white'; // Make text color white for better contrast
    }
}

// Function to copy the rank link to clipboard when a table cell is double-clicked
function copyRankLink(rank) {
    const rankLink = `${window.location.href}?rank=${rank}`;
    
    // Create a temporary input element to copy the link
    const tempInput = document.createElement('input');
    tempInput.value = rankLink;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand('copy');
    document.body.removeChild(tempInput);

    alert(`Rank link copied to clipboard: ${rankLink}`);
}

// Event listener for the "Share Rank" button
document.getElementById('shareButton').addEventListener('click', () => {
    // Randomly select a student to share
    const student = studentsData[Math.floor(Math.random() * studentsData.length)];
    const studentRank = student.rank;

    const rankLink = `${window.location.href}?rank=${studentRank}`;
    alert(`Share this link to share the student's rank: ${rankLink}`);
    
    // Optionally, you can integrate social media APIs here to share on Facebook, Twitter, etc.
    console.log(`Share this link: ${rankLink}`);
});

// Generate the student table on page load
generateTable();

</script>

</body>
</html>
